<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cart - XELQX</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif; }
    body { background:#f5f5f5; color:#333; }

    /* Header */
    .header { background:#fff; padding:15px 0; box-shadow:0 2px 8px rgba(0,0,0,0.05); position:relative; z-index:1000;}
    .container { width:90%; max-width:1200px; margin:auto; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; }
    .logo img { width:125px; }
    nav ul { display:flex; list-style:none; flex-wrap:wrap; }
    nav ul li { margin-left:20px; }
    nav ul li a { text-decoration:none; color:#333; font-weight:500; transition:0.3s; }
    nav ul li a:hover { color:#ff4d4d; }
    .menu-icon { display:none; cursor:pointer; }

    /* Cart Page Table */
    .cart-page { margin:30px auto; max-width:1000px; background:#fff; padding:20px; border-radius:12px; box-shadow:0 10px 25px rgba(0,0,0,0.05); }
    .cart-page h2.title { margin-bottom:20px; text-align:center; font-size:1.8rem; }
    table { width:100%; border-collapse:collapse; }
    th, td { padding:15px; text-align:center; border-bottom:1px solid #eee; font-size:0.95rem; }
    th { background:#f7f7f7; }
    table img { width:70px; border-radius:8px; }
    input[type=number] { width:50px; padding:5px; text-align:center; border:1px solid #ccc; border-radius:5px; }
    .remove-btn { cursor:pointer; color:#ff4d4d; font-size:1.2rem; transition:0.3s; }
    .remove-btn:hover { color:#e60000; }

    .cart-total { font-weight:600; text-align:right; margin-top:20px; font-size:1.2rem; }
    .btn-checkout { padding:10px 20px; background:#222; color:#fff; text-decoration:none; border-radius:6px; text-align:center; transition:0.3s; display:inline-block; float:right; margin-top:10px; cursor:pointer; }
    .btn-checkout:hover { background:#555; }

    @media(max-width:768px){
        .cart-page { padding:10px; }
        table img { width:50px; }
        input[type=number] { width:40px; }
    }
</style>
</head>
<body>

<!-- Header -->
<div class="header">
    <div class="container">
        <div class="logo">
            <img src="images/Xelqx-logo.png" alt="XELQX Logo">
        </div>
        <nav>
            <ul id="MenuItems">
                <li><a href="index.html">Home</a></li>
                <li><a href="products.html">Products</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Contact</a></li>
                <li><a href="#">Account</a></li>
            </ul>
        </nav>
        <img src="images/menu.png" class="menu-icon" onclick="menutoggle()" alt="Menu">
    </div>
</div>

<!-- Cart Page -->
<div class="cart-page">
    <h2 class="title">Your Shopping Cart</h2>
    <table>
        <thead>
            <tr>
                <th>Product</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Subtotal</th>
                <th>Remove</th>
            </tr>
        </thead>
        <tbody id="cartBody">
            <!-- Items will be added dynamically -->
        </tbody>
    </table>
    <div class="cart-total">
        Subtotal: $<span id="cartSubtotal">0.00</span>
    </div>
    <div class="checkout-container">
        <button class="btn-checkout" id="checkoutBtn">Proceed to Checkout &#8594;</button>
    </div>
</div>

<script>
    var MenuItems = document.getElementById("MenuItems");
    MenuItems.style.maxHeight = "0px";
    function menutoggle() {
        if(MenuItems.style.maxHeight === "0px"){ MenuItems.style.maxHeight="200px"; }
        else{ MenuItems.style.maxHeight="0px"; }
    }

    // Load Cart from localStorage
    var cart = JSON.parse(localStorage.getItem("cart")) || [];

    function updateCart() {
        var cartBody = document.getElementById("cartBody");
        var cartSubtotal = document.getElementById("cartSubtotal");
        cartBody.innerHTML = "";
        let subtotal = 0;

        cart.forEach((item, index) => {
            subtotal += item.price * item.qty;

            var tr = document.createElement("tr");
            tr.innerHTML = `
                <td data-label="Product"><img src="${item.img}" alt="${item.name}"><br>${item.name}</td>
                <td data-label="Price">$${item.price}</td>
                <td data-label="Quantity"><input type="number" min="1" value="${item.qty}" data-index="${index}" class="qty-input"></td>
                <td data-label="Subtotal">$${(item.price * item.qty).toFixed(2)}</td>
                <td data-label="Remove"><span class="remove-btn" data-index="${index}">&#10005;</span></td>
            `;
            cartBody.appendChild(tr);
        });

        cartSubtotal.textContent = subtotal.toFixed(2);

        // Quantity Change
        document.querySelectorAll(".qty-input").forEach(input => {
            input.addEventListener("change", () => {
                let val = parseInt(input.value);
                if(val < 1) val = 1;
                cart[input.dataset.index].qty = val;
                localStorage.setItem("cart", JSON.stringify(cart));
                updateCart();
            });
        });

        // Remove Item
        document.querySelectorAll(".remove-btn").forEach(btn => {
            btn.addEventListener("click", () => {
                cart.splice(btn.dataset.index, 1);
                localStorage.setItem("cart", JSON.stringify(cart));
                updateCart();
            });
        });
    }

    updateCart();

    // --- Proceed to Checkout ---
    document.getElementById("checkoutBtn").addEventListener("click", () => {
        if(cart.length === 0){
            alert("Your cart is empty!");
            return;
        }
        // Save the current cart to localStorage for checkout page
        localStorage.setItem("checkoutCart", JSON.stringify(cart));
        window.location.href = "checkout.html";
    });
</script>

</body>
</html>
