<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checkout - XELQX</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, #ffffff, #f0f0f0);
    }

    .checkout-container {
      width: 90%;
      max-width: 1200px;
      margin: 50px auto;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      padding: 30px 40px;
    }

    .checkout-container h2 {
      text-align: center;
      font-weight: 600;
      margin-bottom: 30px;
      font-size: 28px;
      color: #333;
    }

    .checkout-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
    }

    @media(max-width: 768px){
      .checkout-grid {
        grid-template-columns: 1fr;
      }
    }

    .checkout-form .form-group {
      margin-bottom: 15px;
    }

    .checkout-form label {
      display: block;
      font-weight: 500;
      margin-bottom: 5px;
    }

    .checkout-form input {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      outline: none;
      transition: all 0.3s;
    }

    .checkout-form input:focus {
      border-color: #ff523b;
      box-shadow: 0 0 5px rgba(255,82,59,0.4);
    }

    .payment-section h3, .delivery-section h3 {
      margin-top: 25px;
      margin-bottom: 10px;
    }

    .payment-option, .delivery-option {
      margin: 10px 0;
    }

    .payment-option input, .delivery-option input {
      margin-right: 10px;
    }

    .card-details, .upi-details {
      display: none;
      animation: fadeIn 0.4s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .order-summary {
      background: #fafafa;
      padding: 20px;
      border-radius: 10px;
    }

    .order-summary table {
      width: 100%;
      border-collapse: collapse;
    }

    .order-summary th, .order-summary td {
      padding: 10px;
      border-bottom: 1px solid #eee;
    }

    .order-summary th {
      text-align: left;
    }

    .coupon-section {
      margin-top: 15px;
    }

    .coupon-section input {
      width: 70%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-right: 10px;
    }

    .coupon-section button {
      padding: 10px 15px;
      background: #ff523b;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
    }

    .coupon-section button:hover {
      background: #e14b35;
    }

    .btn {
      display: block;
      width: 100%;
      padding: 14px;
      margin-top: 20px;
      background: #ff523b;
      color: #fff;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }

    .btn:hover {
      background: #e14b35;
    }
  </style>
</head>
<body>

<!-- Header -->
<div class="header">
  <div class="container">
    <div class="navbar">
      <div class="logo">
        <a href="index.html"><img src="images/Xelqx-logo.png" width="125px" alt="XELQX Logo"></a>
      </div>
      <nav>
        <ul id="MenuItems">
          <li><a href="index.html">Home</a></li>
          <li><a href="products.html">Products</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="account.html">Account</a></li>
        </ul>
      </nav>
      <img src="images/cart.png" width="30px" height="30px" alt="Cart">
      <img src="images/menu.png" class="menu-icon" onclick="menutoggle()" alt="Menu">
    </div>
  </div>
</div>

<!-- Checkout Container -->
<div class="checkout-container">
  <h2>Checkout</h2>

  <div class="checkout-grid">
    <!-- Left Column: Form -->
    <div class="checkout-form">
      <form id="checkout-form">
        <div class="form-group"><label>Full Name</label><input type="text" id="fullname" required></div>
        <div class="form-group"><label>Email</label><input type="email" id="email" required></div>
        <div class="form-group"><label>Address</label><input type="text" id="address" required></div>
        <div class="form-group"><label>City</label><input type="text" id="city" required></div>
        <div class="form-group"><label>State</label><input type="text" id="state" required></div>
        <div class="form-group"><label>ZIP</label><input type="text" id="zip" required></div>
        <div class="form-group"><label>Phone</label><input type="tel" id="phone" required></div>

        <div class="delivery-section">
          <h3>Delivery Method</h3>
          <div class="delivery-option"><input type="radio" name="delivery" value="standard" checked> Standard (3–5 Days) - $5</div>
          <div class="delivery-option"><input type="radio" name="delivery" value="express"> Express (1–2 Days) - $10</div>
        </div>

        <div class="payment-section">
          <h3>Payment Method</h3>
          <div class="payment-option"><input type="radio" name="payment" id="cod" checked> Cash on Delivery</div>
          <div class="payment-option"><input type="radio" name="payment" id="card"> Credit/Debit Card</div>
          <div class="payment-option"><input type="radio" name="payment" id="upi"> UPI Payment</div>

          <div class="card-details">
            <input type="text" placeholder="Name on Card">
            <input type="text" placeholder="Card Number">
            <input type="text" placeholder="MM/YY">
            <input type="text" placeholder="CVV">
          </div>

          <div class="upi-details">
            <input type="text" placeholder="Enter your UPI ID (e.g., name@upi)">
          </div>
        </div>

        <button type="submit" class="btn">Place Order &#8594;</button>
      </form>
    </div>

    <!-- Right Column: Order Summary -->
    <div class="order-summary">
      <h3>Your Order</h3>
      <table>
        <thead>
          <tr><th>Product</th><th>Price</th></tr>
        </thead>
        <tbody id="order-items"></tbody>
        <tfoot>
          <tr><td>Subtotal</td><td id="subtotal">$0</td></tr>
          <tr><td>Shipping</td><td id="shipping">$5</td></tr>
          <tr><td>Total</td><td id="total">$0</td></tr>
        </tfoot>
      </table>

      <div class="coupon-section">
        <input type="text" id="coupon-code" placeholder="Enter Coupon Code">
        <button type="button" onclick="applyCoupon()">Apply</button>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<div class="footer">
  <div class="container">
    <hr />
    <p class="copyright">Copyright © 2025 - XELQX</p>
  </div>
</div>

<!-- JS -->
<script>
  var MenuItems = document.getElementById("MenuItems");
  MenuItems.style.maxHeight = "0px";

  function menutoggle() {
      if (MenuItems.style.maxHeight === "0px") {
          MenuItems.style.maxHeight = "200px";
      } else {
          MenuItems.style.maxHeight = "0px";
      }
  }

  // Payment toggle
  const codRadio = document.getElementById('cod');
  const cardRadio = document.getElementById('card');
  const upiRadio = document.getElementById('upi');
  const cardDetails = document.querySelector('.card-details');
  const upiDetails = document.querySelector('.upi-details');

  codRadio.addEventListener('change', () => { cardDetails.style.display = 'none'; upiDetails.style.display='none'; });
  cardRadio.addEventListener('change', () => { cardDetails.style.display = 'block'; upiDetails.style.display='none'; });
  upiRadio.addEventListener('change', () => { cardDetails.style.display = 'none'; upiDetails.style.display='block'; });

  // Load cart from localStorage
  var checkoutCart = JSON.parse(localStorage.getItem("checkoutCart")) || [];

  function populateOrderSummary() {
      const orderItems = document.getElementById("order-items");
      const subtotalEl = document.getElementById("subtotal");
      const shippingEl = document.getElementById("shipping");
      const totalEl = document.getElementById("total");

      orderItems.innerHTML = "";
      let subtotal = 0;
      checkoutCart.forEach(item => {
          const tr = document.createElement("tr");
          tr.innerHTML = `<td>${item.name} x ${item.qty}</td><td>$${(item.price * item.qty).toFixed(2)}</td>`;
          orderItems.appendChild(tr);
          subtotal += item.price * item.qty;
      });

      const shipping = 5; // default shipping, can be dynamic later
      const total = subtotal + shipping;

      subtotalEl.textContent = "$" + subtotal.toFixed(2);
      shippingEl.textContent = "$" + shipping.toFixed(2);
      totalEl.textContent = "$" + total.toFixed(2);
  }

  populateOrderSummary();

  // Form submission
  document.getElementById('checkout-form').addEventListener('submit', function(e){
      e.preventDefault();

      let subtotal = checkoutCart.reduce((acc, item) => acc + item.price * item.qty, 0);
      let shipping = 5;
      let total = subtotal + shipping;

      // Generate order products string
      let productsString = checkoutCart.map(item => `${item.name} x ${item.qty}`).join(", ");

      const order = {
          id: "XELQX" + Math.floor(100000 + Math.random() * 900000),
          name: document.getElementById('fullname').value,
          address: document.getElementById('address').value + ", " + document.getElementById('city').value,
          payment: cardRadio.checked ? "Card Payment" : upiRadio.checked ? "UPI Payment" : "Cash on Delivery",
          total: total.toFixed(2),
          date: new Date().toLocaleString(),
          status: "processing",
          product: productsString
      };

      // Load all previous orders or start empty
      let orders = JSON.parse(localStorage.getItem("allOrders")) || [];
      orders.unshift(order);
      localStorage.setItem("allOrders", JSON.stringify(orders));

      // Clear checkoutCart
      localStorage.removeItem("checkoutCart");

      // Redirect to success page
      window.location.href = "order-success.html";
  });

</script>


</body>
</html>
